(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{332:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5386)}])},5386:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var s=r(8283),n=r(294),a=r.n(n),o=r(4639),i=r.n(o),l=r(8091),c=r(2546);let d=i()(r.e(225).then(r.t.bind(r,9225,23)),{loadableGenerated:{webpack:()=>[9225]},ssr:!1});function m(){let{save:e,setSave:t}=(0,c.useContext)(l.M);return e?(0,s.jsx)("div",{className:"basis-full",children:(0,s.jsx)(d,{src:e,theme:"monokai",indentWidth:2,collapsed:1,name:null,sortKeys:!0,onEdit:e=>{t(e.updated_src)}})}):(0,s.jsx)("div",{className:"basis-full",children:"Import Save Above"})}var x=r(6621);let u={serialize(e){let t=JSON.stringify(e,this.jsonConverter);return this.encodeText(t,"savefile")},jsonConverter:(e,t)=>t===1/0?"Infinity":t instanceof Set?Array.from(t.keys()):t,deserialize(e){if("string"==typeof e)return JSON.parse(this.decodeText(e,"savefile"),(e,t)=>t===1/0?"Infinity":t)},encoder:new TextEncoder,decoder:new TextDecoder,startingString:{savefile:"AntimatterDimensionsSavefileFormat","automator script":"AntimatterDimensionsAutomatorScriptFormat","automator data":"AntimatterDimensionsAutomatorDataFormat","glyph filter":"AntimatterDimensionsGlyphFilterFormat"},endingString:{savefile:"EndOfSavefile","automator script":"EndOfAutomatorScript","automator data":"EndOfAutomatorData","glyph filter":"EndOfGlyphFilter"},version:"AAB",steps:[{encode:e=>u.encoder.encode(e),decode:e=>u.decoder.decode(e)},{encode:e=>x.ZP.deflate(e),decode:e=>x.ZP.inflate(e)},{encode:e=>Array.from(e).map(e=>String.fromCharCode(e)).join(""),decode:e=>Uint8Array.from(Array.from(e).map(e=>e.charCodeAt(0)))},{encode:e=>btoa(e),decode:e=>atob(e)},{encode:e=>e.replace(/=+$/gu,"").replace(/0/gu,"0a").replace(/\+/gu,"0b").replace(/\//gu,"0c"),decode:e=>e.replace(/0b/gu,"+").replace(/0c/gu,"/").replace(/0a/gu,"0")},{encode:(e,t)=>e+u.endingString[t],decode:(e,t)=>e.slice(0,e.length-u.endingString[t].length),condition:e=>e>="AAB"}],getSteps(e,t){return this.steps.filter(e=>!e.condition||e.condition(t)).concat({encode:t=>"".concat(u.startingString[e]+u.version).concat(t),decode:t=>t.slice(u.startingString[e].length+3)})},encodeText(e,t){return this.getSteps(t,this.version).reduce((e,r)=>r.encode(e,t),e)},decodeText(e,t){if(e.startsWith(this.startingString[t])){let r=this.startingString[t].length,s=e.slice(r,r+3);return this.getSteps(t,s).reduceRight((e,r)=>r.decode(e,t),e)}return atob(e)}};var g=r(6949);function b(){let{modalOpen:e,setModalOpen:t,setInputString:r,inputString:n,setSave:a,setError:o}=(0,c.useContext)(l.M);return(0,c.useEffect)(()=>{e&&(r(""),o(""))},[e,r,o]),(0,s.jsxs)(g.u_,{show:e,onClose:()=>t(!1),dismissible:!0,size:"2xl",className:"bg-gray-950 text-white font-mono",theme:h(),children:[(0,s.jsx)(g.u_.Header,{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-600",children:(0,s.jsx)("span",{className:"text-white",children:"Import Save"})}),(0,s.jsx)(g.u_.Body,{className:"items-center p-4",children:(0,s.jsx)("div",{className:"grid gap-4 mb-4 grid-cols-2",children:(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block mb-2 text-sm font-medium",children:"Save"}),(0,s.jsx)("textarea",{id:"saveInput",className:"p-4 block w-full text-sm bg-gray-700 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 min-h-32 ",placeholder:"Paste save here...",onChange:e=>{r(e.target.value),o("")}})]})})}),(0,s.jsxs)(g.u_.Footer,{children:[(0,s.jsx)(g.zx,{className:"bg-gray-700 px-2",onClick:e=>{if(e.preventDefault(),n&&0!==n.length)try{let e=u.deserialize(n.trim());e&&(a(e),t(!1))}catch(e){console.error(e),o("Invalid save string"),t(!1)}},children:"Import"}),(0,s.jsx)(g.zx,{className:"bg-gray-700 px-2",onClick:()=>t(!1),children:"Cancel"})]})]})}let p=function(){let{showToast:e,setShowToast:t}=(0,c.useContext)(l.M);return(0,s.jsxs)(g.u_,{show:e,onClose:()=>t(!1),dismissible:!0,size:"2xl",className:"bg-gray-950 text-white font-mono",theme:h(),children:[(0,s.jsx)(g.u_.Header,{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-600",children:(0,s.jsx)("span",{className:"text-white",children:"Export Success"})}),(0,s.jsx)(g.u_.Body,{className:"items-center p-4",children:(0,s.jsx)("div",{className:"grid gap-4 mb-4 grid-cols-2",children:(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)("label",{className:"p-1 pt-2 block mb-2 text-sm",children:"Save Exported to Clipboard"})})})}),(0,s.jsx)(g.u_.Footer,{children:(0,s.jsx)(g.zx,{className:"bg-gray-700 px-2 py-1",onClick:()=>t(!1),children:"Close"})})]})};function h(){return{root:{sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"}},header:{base:"border-gray-600 flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-600 text-white bg-gray-900"},body:{base:"items-center p-4 bg-gray-900"},footer:{base:"flex items-center space-x-2 rounded-b p-6 border-gray-600 border-t text-white bg-gray-900"}}}function f(){let{setModalOpen:e,modalOpen:t,save:r,setShowToast:n}=(0,c.useContext)(l.M);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("main",{className:"flex min-h-screen flex-col min-w-fit items-center p-8 md:p-24 font-mono bg-gray-900 ".concat(a().className),children:[(0,s.jsx)("h1",{className:"text-lg md:text-3xl font-bold text-white pb-4 text-center",children:"Antimatter Dimensions Save Editor"}),(0,s.jsx)("div",{className:"basis-full",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 w-full gap-4 pb-10",children:[(0,s.jsx)(j,{onClick:()=>{e(!0)},text:"Import Save"}),(0,s.jsx)(j,{onClick:()=>v({save:r,setShowToast:n}),text:"Export Save",className:"col-start-2 md:col-start-5"})]})}),(0,s.jsx)("div",{className:"basis-full",children:(0,s.jsx)(m,{})}),(0,s.jsx)(b,{}),(0,s.jsx)(p,{})]})})}let v=e=>{let{save:t,setShowToast:r}=e;if(!t){console.error("no save data to export");return}console.log("exporting save",t);let s=u.serialize(t);navigator.clipboard.writeText(s).then(()=>{console.log("copied to clipboard"),r(!0)},e=>{console.error("failed to copy to clipboard",e)})},j=function(e){let{onClick:t,text:r,className:n,modalName:a}=e;return(0,s.jsx)("button",{className:"block w-full md:w-auto text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 "+n,onClick:t,type:"button",...a?{"data-modal-toggle":a,"data-modal-target":a}:{},children:r})}}},function(e){e.O(0,[587,311,905,508,626,888,774,179],function(){return e(e.s=332)}),_N_E=e.O()}]);